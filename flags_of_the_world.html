<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flags Grid</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Standard */
            padding-top: 70px; /* Add padding to account for fixed navbar */
        }
        .flag {
            padding-bottom: 60%;
            position: relative;
            cursor: pointer;
            border: 1px solid black;
        }
        .flag img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .country-name {
            text-align: center;
            line-height: 60px;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
        }
        .green-background {
            background-color: lightgreen;
        }
        .red-background {
            background-color: lightcoral;
        }
        @media (max-width: 1920px) {
            .country-name {
                font-size: 1.6vw;
            }
        }
        @media (max-width: 990px) {
            .country-name {
                font-size: 4vw;
            }
        }
        @media (max-width: 700px) {
            .country-name {
                font-size: 3.4vw;
            }
        }
        @media (max-width: 400px) {
            .country-name {
                font-size: 6vw;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top justify-content-between">
        <button id="shuffle-button" class="btn btn-outline-primary">Shuffle</button>
        <div class="navbar-text mx-auto">
            <div id="score">Score: 0</div>
        </div>
        <div class="d-flex">
            <button id="restore-button" class="btn btn-outline-secondary mr-2">Flags</button>
            <button id="show-countries-button" class="btn btn-outline-success">Countries</button>
        </div>
    </nav>
    <div class="p-4">
        <div class="row" id="flags-grid"></div>
    </div>

    <script>
        const countries = [
    { "country": "אפגניסטן", "code": "af" },
    { "country": "אלבניה", "code": "al" },
    { "country": "אלג`יריה", "code": "dz" },
    { "country": "אנדורה", "code": "ad" },
    { "country": "אנגולה", "code": "ao" },
    { "country": "ארגנטינה", "code": "ar" },
    { "country": "ארמניה", "code": "am" },
    { "country": "אוסטרליה", "code": "au" },
    { "country": "אוסטריה", "code": "at" },
    { "country": "אזרבייג`ן", "code": "az" },
    { "country": "בהאמה", "code": "bs" },
    { "country": "בחריין", "code": "bh" },
    { "country": "בנגלדש", "code": "bd" },
    { "country": "ברבדוס", "code": "bb" },
    { "country": "בלארוס", "code": "by" },
    { "country": "בלגיה", "code": "be" },
    { "country": "בליז", "code": "bz" },
    { "country": "בנין", "code": "bj" },
    { "country": "בהוטן", "code": "bt" },
    { "country": "בוליביה", "code": "bo" },
    { "country": "בוסניה והרצגובינה", "code": "ba" },
    { "country": "בוצואנה", "code": "bw" },
    { "country": "ברזיל", "code": "br" },
    { "country": "ברוניי", "code": "bn" },
    { "country": "בולגריה", "code": "bg" },
    { "country": "בורקינה פאסו", "code": "bf" },
    { "country": "בורונדי", "code": "bi" },
    { "country": "קייפ ורדה", "code": "cv" },
    { "country": "קמבודיה", "code": "kh" },
    { "country": "קמרון", "code": "cm" },
    { "country": "קנדה", "code": "ca" },
    { "country": "הרפובליקה המרכז-אפריקאית", "code": "cf" },
    { "country": "צ`אד", "code": "td" },
    { "country": "צ`ילה", "code": "cl" },
    { "country": "סין", "code": "cn" },
    { "country": "קולומביה", "code": "co" },
    { "country": "קומורו", "code": "km" },
    { "country": "קונגו (ברזוויל)", "code": "cg" },
    { "country": "קוסטה ריקה", "code": "cr" },
    { "country": "קרואטיה", "code": "hr" },
    { "country": "קובה", "code": "cu" },
    { "country": "קפריסין", "code": "cy" },
    { "country": "צ`כיה (הרפובליקה הצ`כית)", "code": "cz" },
    { "country": "דנמרק", "code": "dk" },
    { "country": "ג`יבוטי", "code": "dj" },
    { "country": "דומיניקה", "code": "dm" },
    { "country": "הרפובליקה הדומיניקנית", "code": "do" },
    { "country": "אקוודור", "code": "ec" },
    { "country": "מצרים", "code": "eg" },
    { "country": "אל סלבדור", "code": "sv" },
    { "country": "גינאה המשוונית", "code": "gq" },
    { "country": "אריתריאה", "code": "er" },
    { "country": "אסטוניה", "code": "ee" },
    { "country": "אסוואטיני (סווזילנד לשעבר)", "code": "sz" },
    { "country": "אתיופיה", "code": "et" },
    { "country": "פיג`י", "code": "fj" },
    { "country": "פינלנד", "code": "fi" },
    { "country": "צרפת", "code": "fr" },
    { "country": "גבון", "code": "ga" },
    { "country": "גמביה", "code": "gm" },
    { "country": "גאורגיה", "code": "ge" },
    { "country": "גרמניה", "code": "de" },
    { "country": "גאנה", "code": "gh" },
    { "country": "יוון", "code": "gr" },
    { "country": "גרנדה", "code": "gd" },
    { "country": "גואטמלה", "code": "gt" },
    { "country": "גינאה", "code": "gn" },
    { "country": "גינאה-ביסאו", "code": "gw" },
    { "country": "גיאנה", "code": "gy" },
    { "country": "האיטי", "code": "ht" },
    { "country": "הונדורס", "code": "hn" },
    { "country": "הונגריה", "code": "hu" },
    { "country": "איסלנד", "code": "is" },
    { "country": "הודו", "code": "in" },
    { "country": "אינדונזיה", "code": "id" },
    { "country": "איראן", "code": "ir" },
    { "country": "עיראק", "code": "iq" },
    { "country": "אירלנד", "code": "ie" },
    { "country": "ישראל", "code": "il" },
    { "country": "איטליה", "code": "it" },
    { "country": "ג`מייקה", "code": "jm" },
    { "country": "יפן", "code": "jp" },
    { "country": "ירדן", "code": "jo" },
    { "country": "קזחסטן", "code": "kz" },
    { "country": "קניה", "code": "ke" },
    { "country": "קיריבטי", "code": "ki" },
    { "country": "כווית", "code": "kw" },
    { "country": "קירגיזסטן", "code": "kg" },
    { "country": "לאוס", "code": "la" },
    { "country": "לטביה", "code": "lv" },
    { "country": "לבנון", "code": "lb" },
    { "country": "לסוטו", "code": "ls" },
    { "country": "ליבריה", "code": "lr" },
    { "country": "לוב", "code": "ly" },
    { "country": "ליכטנשטיין", "code": "li" },
    { "country": "ליטא", "code": "lt" },
    { "country": "לוקסמבורג", "code": "lu" },
    { "country": "מדגסקר", "code": "mg" },
    { "country": "מלאווי", "code": "mw" },
    { "country": "מלזיה", "code": "my" },
    { "country": "מלדיביים", "code": "mv" },
    { "country": "מאלי", "code": "ml" },
    { "country": "מלטה", "code": "mt" },
    { "country": "איי מרשל", "code": "mh" },
    { "country": "מאוריטניה", "code": "mr" },
    { "country": "מאוריציוס", "code": "mu" },
    { "country": "מקסיקו", "code": "mx" },
    { "country": "מיקרונזיה", "code": "fm" },
    { "country": "מולדובה", "code": "md" },
    { "country": "מונקו", "code": "mc" },
    { "country": "מונגוליה", "code": "mn" },
    { "country": "מונטנגרו", "code": "me" },
    { "country": "מרוקו", "code": "ma" },
    { "country": "מוזמביק", "code": "mz" },
    { "country": "מיאנמר (בורמה לשעבר)", "code": "mm" },
    { "country": "נמיביה", "code": "na" },
    { "country": "נאורו", "code": "nr" },
    { "country": "נפאל", "code": "np" },
    { "country": "הולנד", "code": "nl" },
    { "country": "ניו זילנד", "code": "nz" },
    { "country": "ניקרגואה", "code": "ni" },
    { "country": "ניז`ר", "code": "ne" },
    { "country": "ניגריה", "code": "ng" },
    { "country": "קוריאה הצפונית", "code": "kp" },
    { "country": "צפון מקדוניה", "code": "mk" },
    { "country": "נורווגיה", "code": "no" },
    { "country": "עומאן", "code": "om" },
    { "country": "פקיסטן", "code": "pk" },
    { "country": "פלאו", "code": "pw" },
    { "country": "מדינת פלסטין", "code": "ps" },
    { "country": "פנמה", "code": "pa" },
    { "country": "פפואה גינאה החדשה", "code": "pg" },
    { "country": "פרגוואי", "code": "py" },
    { "country": "פרו", "code": "pe" },
    { "country": "פיליפינים", "code": "ph" },
    { "country": "פולין", "code": "pl" },
    { "country": "פורטוגל", "code": "pt" },
    { "country": "קטאר", "code": "qa" },
    { "country": "רומניה", "code": "ro" },
    { "country": "רוסיה", "code": "ru" },
    { "country": "רואנדה", "code": "rw" },
    { "country": "סנט קיטס ונוויס", "code": "kn" },
    { "country": "סנט לוסיה", "code": "lc" },
    { "country": "סנט וינסנט והגרנדינים", "code": "vc" },
    { "country": "סמואה", "code": "ws" },
    { "country": "סן מרינו", "code": "sm" },
    { "country": "סאו טומה ופרינסיפה", "code": "st" },
    { "country": "ערב הסעודית", "code": "sa" },
    { "country": "סנגל", "code": "sn" },
    { "country": "סרביה", "code": "rs" },
    { "country": "סיישל", "code": "sc" },
    { "country": "סיירה לאון", "code": "sl" },
    { "country": "סינגפור", "code": "sg" },
    { "country": "סלובקיה", "code": "sk" },
    { "country": "סלובניה", "code": "si" },
    { "country": "איי שלמה", "code": "sb" },
    { "country": "סומליה", "code": "so" },
    { "country": "דרום אפריקה", "code": "za" },
    { "country": "דרום קוריאה", "code": "kr" },
    { "country": "דרום סודן", "code": "ss" },
    { "country": "ספרד", "code": "es" },
    { "country": "סרי לנקה", "code": "lk" },
    { "country": "סודן", "code": "sd" },
    { "country": "סורינאם", "code": "sr" },
    { "country": "שוודיה", "code": "se" },
    { "country": "שווייץ", "code": "ch" },
    { "country": "סוריה", "code": "sy" },
    { "country": "טייוואן", "code": "tw" },
    { "country": "טג`יקיסטן", "code": "tj" },
    { "country": "טנזניה", "code": "tz" },
    { "country": "תאילנד", "code": "th" },
    { "country": "טימור-לסטה", "code": "tl" },
    { "country": "טוגו", "code": "tg" },
    { "country": "טונגה", "code": "to" },
    { "country": "טרינידד וטובגו", "code": "tt" },
    { "country": "תוניסיה", "code": "tn" },
    { "country": "טורקיה", "code": "tr" },
    { "country": "טורקמניסטן", "code": "tm" },
    { "country": "טובלו", "code": "tv" },
    { "country": "אוגנדה", "code": "ug" },
    { "country": "אוקראינה", "code": "ua" },
    { "country": "איחוד האמירויות הערביות", "code": "ae" },
    { "country": "הממלכה המאוחדת", "code": "gb" },
    { "country": "ארצות הברית של אמריקה", "code": "us" },
    { "country": "אורוגוואי", "code": "uy" },
    { "country": "אוזבקיסטן", "code": "uz" },
    { "country": "ונואטו", "code": "vu" },
    { "country": "הוותיקן", "code": "va" },
    { "country": "ונצואלה", "code": "ve" },
    { "country": "וייטנאם", "code": "vn" },
    { "country": "תימן", "code": "ye" },
    { "country": "זמביה", "code": "zm" },
    { "country": "זימבבואה", "code": "zw" }
];

        let score = 0;
        let mode = 'flags'; // 'flags' or 'countries'
        let currentCountries = [...countries];

        const originalOrder = [...countries];

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function renderFlags(countriesArray) {
            const flagsGrid = document.getElementById('flags-grid');
            flagsGrid.innerHTML = '';
            countriesArray.forEach(country => {
                const colDiv = document.createElement('div');
                colDiv.className = 'col-6 col-md-4 col-lg-2 mb-4';
                const flagDiv = document.createElement('div');
                flagDiv.className = 'flag';
                flagDiv.setAttribute('data-code', country.code);
                if (mode === 'flags') {
                    flagDiv.innerHTML = `<img src="https://flagcdn.com/${country.code}.svg" alt="${country.country}" class="flag-img">`;
                } else if (mode === 'countries') {
                    flagDiv.innerHTML = `<div class="country-name">${country.country}</div>`;
                }
                flagDiv.onclick = (event) => revealCountryName(event, flagDiv, country.country);
                colDiv.appendChild(flagDiv);
                flagsGrid.appendChild(colDiv);
            });
        }

        function resetScore() {
            score = 0;
            updateScore();
        }

        renderFlags(countries);

        document.getElementById('shuffle-button').onclick = () => {
            resetScore();
            shuffle(currentCountries);
            renderFlags(currentCountries);
        };

        document.getElementById('restore-button').onclick = () => {
            resetScore();
            mode = 'flags';
            currentCountries = [...originalOrder];
            renderFlags(currentCountries);
        };

        document.getElementById('show-countries-button').onclick = () => {
            resetScore();
            mode = 'countries';
            currentCountries = [...originalOrder];
            renderFlags(currentCountries);
        };

        function revealCountryName(event, element, countryName) {
            event.preventDefault();
            element.innerHTML = `<div class="country-name" ondblclick="returnFlag(event, '${element.getAttribute('data-code')}', '${countryName}')" onclick="changeBackground(event, 'green-background')" oncontextmenu="changeBackground(event, 'red-background')">${countryName}</div>`;
        }

        function changeBackground(event, colorClass) {
            event.preventDefault();
            event.stopPropagation();
            const countryNameDiv = event.target;
            const currentClass = countryNameDiv.classList.contains('green-background') ? 'green-background' : 
                                (countryNameDiv.classList.contains('red-background') ? 'red-background' : 'white-background');

            if (colorClass === 'green-background') {
                if (currentClass === 'white-background') {
                    score += 1;
                } else if (currentClass === 'red-background') {
                    score += 1;
                }
                countryNameDiv.classList.remove('red-background', 'white-background');
                countryNameDiv.classList.add('green-background');
            } else if (colorClass === 'red-background') {
                if (currentClass === 'green-background') {
                    score -= 1;
                }
                countryNameDiv.classList.remove('green-background', 'white-background');
                countryNameDiv.classList.add('red-background');
            }

            updateScore();
        }

        function updateScore() {
            document.getElementById('score').innerText = `Score: ${score}`;
        }

        function returnFlag(event, countryCode, countryName) {
            event.stopPropagation();
            const parentDiv = event.target.parentElement;
            parentDiv.innerHTML = `<img src="https://flagcdn.com/${countryCode}.svg" alt="${countryName}" class="flag-img">`;
            score -= 1;
            updateScore();
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
